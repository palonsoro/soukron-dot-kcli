[OSEv3:children]
masters
lb
nodes
etcd
{% if glusterfs %}
glusterfs
{% endif %}

[OSEv3:vars]
ansible_ssh_user=cloud-user
ansible_ssh_passwd=cloud-user
ansible_become=true
openshift_deployment_type=openshift-enterprise

openshift_disable_check=disk_availability,memory_availability

openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider'}]
openshift_master_htpasswd_users={'admin':'$apr1$n5wT0FX/$Qoxr9tYwdiu2iN.gOei7A1'}

openshift_master_cluster_method=native
openshift_master_cluster_hostname=console-int.{{ cluster_name }}.{{ domain }}
openshift_master_cluster_public_hostname=console.{{ cluster_name }}.{{ domain }}
openshift_master_default_subdomain=apps.{{ cluster_name }}.{{ domain }}

os_sdn_network_plugin_name='redhat/openshift-ovs-networkpolicy'

openshift_clock_enabled=true

openshift_router_selector="node-role.kubernetes.io/infra=true"
openshift_registry_selector="node-role.kubernetes.io/infra=true"
osm_default_node_selector="node-role.kubernetes.io/compute=true"

openshift_enable_service_catalog=false
template_service_broker_install=false
ansible_service_broker_install=false

openshift_metrics_install_metrics=true
openshift_metrics_server_install=true

oreg_auth_user='7088399|quicklab'
oreg_auth_password='eyJhbGciOiJSUzUxMiJ9.eyJzdWIiOiJmNDk4MWNiMTc5NGI0NDIzYWE1YTMzZGNlZGMwMjhmZCJ9.hL1Kl3aCA6bDDdMXt0zTvs3pqQiBJD1gsph_gchc0NOzR3G8o9u0yi4Vemn-cw-078bNBd3IVYLWiPz7EY7TD_xb1MIDCoSDjBFbTODHzqmxk6pj6ii4mLYJArTHIANY62dST1X1Eddx2K5yhJz6oUVS13hTfOru-WFdH0qwje9350F4uVOik9nRuEga9-f18DPsF1RLu6TFfEUI7_m8jKb3P80ZduZ2ATL_sPVBwSbiEV25dqB8DriNAZDaI_UB9nuW3OG5eOAILgmiaD_9X9xy5tXk3iGum4DHc-58NTqhR5_aUSNINcFpC_zkXF072WyMz8s1f3XNnOxDcOpS4E0JEtbQkCaeXDw6qAtWoK_cNVEkcRCao06bwHje9lG72QNTNTS_kZ11nPsMlK6ncrhPspASfkw1ZroE8Jlky58YCkE9CHwjPTPLB8zEXd8Ur_dizIK8LrRCLVa5ee6BCfIO6Ak1VaD8701yvE8CyWdVPqLSGnSWxk20ZyDdvZa__gX5_ibJeoXngU6eA-sW-MVeHP6WVFT6R92m-4Rk9gAse6TASCIzuyPzm7BdOlLUwqrOPTBnLnmkiQ1dMfYPTGa43o2Ya7Lx-jDZsNSvbTW3TCryu0qBiQ6Np2brevq2SQ7tz5YjYdAZtRHp23OyAWiSqcMEjb8oue844Ra5UTs'

{% if glusterfs -%}
openshift_storage_glusterfs_namespace=app-storage
openshift_storage_glusterfs_storageclass=true
openshift_storageclass_default=false
openshift_storage_glusterfs_storageclass_default=True
openshift_storage_glusterfs_block_deploy=false
{%- endif %}

[masters]
{% for master in range(0, masters) -%}
{{ cluster_name }}-master0{{ master +1 }}.{{ domain }}
{% endfor -%}

[lb]
{{ cluster_name }}-masterlb.{{ domain }}

[etcd]
{% for master in range(0, masters) -%}
{{ cluster_name }}-master0{{ master +1 }}.{{ domain }}
{% endfor -%}

[nodes]
{% for master in range(0, masters) -%}
{{ cluster_name }}-master0{{ master +1 }}.{{ domain }} openshift_node_group_name='node-config-master-infra'
{% endfor -%}
{% for node in range(0, nodes) -%}
{{ cluster_name }}-node0{{ node +1 }}.{{ domain }} openshift_node_group_name='node-config-compute'
{% endfor -%}

{% if glusterfs %}
[glusterfs]
{% if nodes == 2 %}
{{ cluster_name }}-master01.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{{ cluster_name }}-node01.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{{ cluster_name }}-node02.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{% elif nodes > 2 %}
{{ cluster_name }}-node01.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{{ cluster_name }}-node02.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{{ cluster_name }}-node03.{{ domain }} glusterfs_devices='[ "/dev/{{ glusterfs_disk }}" ]'
{% endif %}
{% endif %}
